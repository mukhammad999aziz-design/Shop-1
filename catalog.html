<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ö–∞—Ç–∞–ª–æ–≥</title>
    <style>
        body{font-family:Arial,sans-serif;background:#f0f4f8;margin:0;padding:0;}
        header{background:#2563eb;color:white;padding:15px 30px;display:flex;justify-content:space-between;align-items:center;}
        header h1{margin:0;font-size:22px;}
        nav a{color:white;text-decoration:none;margin-left:20px;font-weight:500;transition:0.3s;}
        nav a:hover{color:#ffdd57;}
        .container{max-width:1200px;margin:30px auto;padding:0 15px;display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:20px;}
        .product{background:white;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,0.1);padding:15px;text-align:center;transition:0.3s;}
        .product:hover{transform:translateY(-5px);}
        .product img{max-width:100%;height:180px;object-fit:cover;border-radius:10px;margin-bottom:10px;}
        .product h3{font-size:18px;margin:10px 0 5px;}
        .product p{font-size:16px;margin:5px 0;}
        .btn{display:inline-block;margin-top:8px;padding:8px 16px;border:none;border-radius:8px;cursor:pointer;font-weight:500;}
        .btn-buy{background:#10b981;color:white;}
        .btn-view{background:#facc15;color:#333;}
        .modal{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.5);justify-content:center;align-items:center;}
        .modal-content{background:#fff;padding:20px;border-radius:12px;max-width:400px;text-align:center;}
        .modal-content img{max-width:100%;height:200px;object-fit:cover;border-radius:10px;margin-bottom:15px;}
        .close{background:#ef4444;color:white;border:none;padding:6px 12px;border-radius:6px;cursor:pointer;margin-top:10px;}
    </style>
</head>
<body>

<header>
    <h1>–ö–∞—Ç–∞–ª–æ–≥</h1>
    <nav>
        <a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a>
        <a href="cart.html">–ö–æ—Ä–∑–∏–Ω–∞</a>
    </nav>
</header>

<main class="container" id="products"></main>

<footer>¬© 2025 ‚Äì –¢–≤–æ–π –º–∞–≥–∞–∑–∏–Ω. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</footer>

<div class="modal" id="productModal">
    <div class="modal-content">
        <h2 id="modalName"></h2>
        <img id="modalImage" src="" alt="">
        <p id="modalPrice"></p>
        <p id="modalDesc"></p>
        <p id="modalStatus"></p>
        <button class="close" onclick="closeModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
    </div>
</div>

<script>
    // –†–∞–±–æ—Ç–∞ —Å localStorage
    function getProducts(){ return JSON.parse(localStorage.getItem("products"))||[]; }
    function setProducts(products){ localStorage.setItem("products",JSON.stringify(products)); }
    function getCart(){ return JSON.parse(localStorage.getItem("cart"))||[]; }
    function setCart(cart){ localStorage.setItem("cart",JSON.stringify(cart)); }

    function buyProduct(id){
        let cart=getCart();
        if(!cart.includes(id)) cart.push(id);
        setCart(cart);
        alert("–¢–æ–≤–∞—Ä –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É!");
    }

    function viewProduct(p){
        document.getElementById("modalName").textContent=p.name;
        document.getElementById("modalPrice").textContent="üí∞ "+p.price+" —Å–æ–º";
        document.getElementById("modalDesc").textContent=p.desc;
        document.getElementById("modalImage").src=p.image;
        document.getElementById("modalStatus").textContent=p.status==='in'?'–í –Ω–∞–ª–∏—á–∏–∏ ‚úÖ':'–ù–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏ ‚ùå';
        document.getElementById("productModal").style.display="flex";
    }
    function closeModal(){ document.getElementById("productModal").style.display="none"; }

    function renderProducts(){
        const products=getProducts();
        const container=document.getElementById("products");
        container.innerHTML="";
        if(products.length===0){ 
            container.innerHTML="<p>–ü–æ–∫–∞ –Ω–µ—Ç —Ç–æ–≤–∞—Ä–æ–≤ üòî</p>"; 
            return; 
        }
        products.forEach(p=>{
            container.innerHTML+=`
    <div class="product">
      <img src="${p.image}" alt="${p.name}">
      <h3>${p.name}</h3>
      <p>${p.price} ‚ÇΩ</p>
      <small>${p.desc}</small><br>
      <p><strong>–°—Ç–∞—Ç—É—Å: ${p.status==='in'?'–í –Ω–∞–ª–∏—á–∏–∏ ‚úÖ':'–ù–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏ ‚ùå'}</strong></p>
      <button class="btn btn-buy" onclick="buyProduct(${p.id})" ${p.status==='out'?'disabled':''}>
        ${p.status==='out'?'–ù–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏':'–ö—É–ø–∏—Ç—å'}
      </button>
      <button class="btn btn-view" onclick='viewProduct(${JSON.stringify(p)})'>–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å</button>
    </div>`;
        });
    }

    // –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã ‚Äî –ø–æ–¥–≥—Ä—É–∑–∏—Ç—å —Ç–æ–≤–∞—Ä—ã
    document.addEventListener("DOMContentLoaded", renderProducts);
</script>
</body>
</html>
