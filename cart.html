<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ö–æ—Ä–∑–∏–Ω–∞</title>
    <style>
        body{font-family:Arial,sans-serif;background:#f0f4f8;margin:0;padding:0;}
        header{background:#2563eb;color:white;padding:15px 30px;display:flex;justify-content:space-between;align-items:center;}
        header h1{margin:0;font-size:22px;}
        nav a{color:white;text-decoration:none;margin-left:20px;font-weight:500;transition:0.3s;}
        nav a:hover{color:#ffdd57;}
        .container{max-width:900px;margin:30px auto;padding:0 15px;}
        .cart-item{background:white;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,0.1);padding:15px;margin-bottom:15px;display:flex;align-items:center;}
        .cart-item img{width:80px;height:80px;object-fit:cover;border-radius:8px;margin-right:15px;}
        .cart-item div{flex:1;}
        .cart-item button{background:#ef4444;color:white;border:none;padding:6px 12px;border-radius:6px;cursor:pointer;}
        .checkout{background:#10b981;color:white;border:none;padding:10px 20px;border-radius:8px;cursor:pointer;margin-top:20px;}
        footer{text-align:center;padding:15px;background:#2563eb;color:white;margin-top:40px;}
    </style>
</head>
<body>
<header>
    <h1>–ö–æ—Ä–∑–∏–Ω–∞</h1>
    <nav>
        <a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a>
        <a href="catalog.html">–ö–∞—Ç–∞–ª–æ–≥</a>
    </nav>
</header>

<main class="container" id="cart"></main>
<button class="checkout" onclick="checkout()">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>

<footer>¬© 2025 ‚Äì –¢–≤–æ–π –º–∞–≥–∞–∑–∏–Ω. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</footer>

<script>
    // –†–∞–±–æ—Ç–∞ —Å localStorage
    function getProducts(){ return JSON.parse(localStorage.getItem("products"))||[]; }
    function setProducts(products){ localStorage.setItem("products",JSON.stringify(products)); }
    function getCart(){ return JSON.parse(localStorage.getItem("cart"))||[]; }
    function setCart(cart){ localStorage.setItem("cart",JSON.stringify(cart)); }

    function renderCart(){
        const products=getProducts();
        const cart=getCart();
        const container=document.getElementById("cart");
        container.innerHTML="";
        if(cart.length===0){ 
            container.innerHTML="<p>–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞ üòî</p>"; 
            return; 
        }

        cart.forEach((id,index)=>{
            const p=products.find(x=>x.id===id);
            if(p){
                container.innerHTML+=`
      <div class="cart-item">
        <img src="${p.image}" alt="${p.name}">
        <div>
          <strong>${p.name}</strong><br>
          –¶–µ–Ω–∞: ${p.price} ‚ÇΩ<br>
          –°—Ç–∞—Ç—É—Å: ${p.status==='in'?'–í –Ω–∞–ª–∏—á–∏–∏ ‚úÖ':'–ù–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏ ‚ùå'}
        </div>
        <button onclick="removeItem(${index})">–£–¥–∞–ª–∏—Ç—å</button>
      </div>`;
            }
        });
    }

    function removeItem(index){
        let cart=getCart();
        cart.splice(index,1);
        setCart(cart);
        renderCart();
    }

    function checkout(){
        const cart=getCart();
        if(cart.length===0){ 
            alert("–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞!"); 
            return; 
        }
        // –ø–µ—Ä–µ—Ö–æ–¥ –≤ —Ç–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç –¥–ª—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è
        window.open("https://t.me/aziz_202q1","_blank");
        // –æ—á–∏—â–∞–µ–º –∫–æ—Ä–∑–∏–Ω—É –ø–æ—Å–ª–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è
        setCart([]);
        renderCart();
    }

    // –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–æ—Ä–∑–∏–Ω—É –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
    document.addEventListener("DOMContentLoaded", renderCart);
</script>
</body>
</html>
